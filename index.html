<!DOCTYPE html>
<html lang="pl">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wayfly</title>
    <link rel="stylesheet" href="/style.css"> <!-- Twój główny CSS -->
    <link rel="icon" href="/wayflyicon.png" type="image/png">
    <style>
        body {
            margin: 0;
           
            background-color: #f7f9fb;
            padding-top: 70px; }/* wysokość menu */
       .banner {
    width: 100%;
    height: 400px; /* jak w FAQ na komputerze */
    background-image: url('https://i.imgur.com/9HUEj4b.jpeg');
    background-size: cover;
    background-position: center;
    border-bottom: 5px solid #0078d7;
}
        #opinie {
  scroll-margin-top: 70px; /* wysokość menu */
}

        /* Szczegóły oferty */
        .details {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center; /* <- wycentrowanie tekstu */
        }
        .details h2 {
            color: #0078d7;
            margin-bottom: 20px;
        }
        .details p {
            margin-bottom: 10px;
        }

        .specs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        .spec {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        /* Powrót do ofert */
        .back-link {
            display: block;
            margin: 30px auto 50px;
            text-align: center;
        }
        .back-link a {
            text-decoration: none;
            color: white;
            background-color: #0078d7;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .back-link a:hover {
            background-color: #005fa3;
        }

        /* --- Poprawka menu dla regulaminu / ogólnie --- */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4da6ff;
            display: flex;
            justify-content: center;
            padding: 30px 0;
            z-index: 1000;
            font-size: 0.9em;
            font-weight: 300;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
            nav {
                flex-direction: row;
                justify-content: space-around;
                padding: 20px 0;
                font-size: 0.85em;
            }
             .banner {
    height: 250px; /* zmniejszona wysokość */
    background-position: center top;
    background-image: url('https://i.imgur.com/qG9ER0m.jpeg');
  }
        }
        @media (max-width: 480px) {
  .banner {
    height: 180px; /* jeszcze mniejszy, lepiej dopasowany */
    background-position: center top;
    background-image: url('https://i.imgur.com/qG9ER0m.jpeg');
  }
}
            body {
                padding-top: 40px;
            }
        }

        @media (max-width: 480px) {
            nav {
                padding: 12px 0;
            }
            body {
                padding-top: 35px;
            }
        }

        /* --- Pop-up kontaktu --- */
        .modal {
            display: none; 
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal .close {
            position: absolute;
            top: 10px;
            right: 15px;
            color: #aaa;
            font-size: 25px;
            font-weight: bold;
            cursor: pointer;
        }

        .modal .close:hover {
            color: #000;
        }
    </style>
</head>
<body>

<!-- Menu -->
<nav>
  <a href="/index.html">Oferty</a>
  <a href="/FAQ/faq.html">FAQ</a>
  <a href="/regulamin/regulamin.html">Regulamin</a>
  <a href="/index.html#opinie">Opinie</a>
  <a href="#" id="contactBtn">Kontakt</a>
</nav>

<!-- Baner -->
<header class="banner"></header>

<!-- Sekcja ofert -->
<h2>Nasze aktualne oferty</h2>
<section id="oferty" class="oferty">
  <a href="paryz.html" class="oferta">
    <img src="https://source.unsplash.com/featured/?paris,travel" alt="Paryż">
    <h3>Romantyczny weekend w Paryżu</h3>
    <p>Odkryj uroki Paryża z dopasowanym planem podróży.</p>
  </a>

  <a href="tatry.html" class="oferta">
    <img src="https://source.unsplash.com/featured/?mountains,travel" alt="Tatry">
    <h3>Górska przygoda w Tatrach</h3>
    <p>Plany tras, schronisk i najlepszych widoków.</p>
  </a>

  <a href="rzym/rzym.html" class="oferta">
    <img src="https://i.imgur.com/jkGLiLu.jpeg" alt="Rzym">
    <div class="overlay">Cena wyjazdu: od 1000 zł | Cena planu: 30 zł</div>
    <div class="text-overlay">
      <h3>Rzym</h3>
    </div>
  </a>
</section>

<!-- Wyświetlanie opinii -->
<section id="reviewsSection">
  <h2>Opinie naszych klientów</h2>
  <div class="reviews-list" id="reviewsList"></div>
</section>

<!-- Sekcja opinii do dodawania -->
<section class="review-section" id="opinie">
  <h2>Dodaj swoją opinię</h2>
  <form id="reviewForm" class="review-form">
    <input type="text" id="name" placeholder="Twoje imię" required>
    <input type="email" id="email" placeholder="Twój email" required>
    <input type="text" id="tripTo" placeholder="Dokąd leciałeś/aś?" required>
    <input type="date" id="tripStart" required>
    <input type="date" id="tripEnd" required>
    <input type="number" id="rating" min="1" max="5" placeholder="Ocena (1-5)" required>
    <textarea id="comment" placeholder="Twoja opinia" rows="4" required></textarea>
    <button type="submit">Wyślij opinię</button>
</form>
  <div id="thankYouMessage"></div>
</section>

<footer>
  2025 Wayfly – indywidualne plany podróży 
</footer>

<!-- Modal Kontakt -->
<div id="contactModal" class="modal">
  <div class="modal-content">
    <span id="contactClose" class="close">&times;</span>
    <h2>Kontakt z nami</h2>
    <p>Email: <a href="mailto:wayfly2025@gmail.com">wayfly2025@gmail.com</a></p>
    <p>Social Media:</p>
    <ul>
      <li><a href="https://www.tiktok.com/@wayfly_" target="_blank">TikTok</a></li>
      <li><a href="https://www.instagram.com/wayfly__/" target="_blank">Instagram</a></li>
    </ul>
  </div>
</div>

<!-- Newsletter Modal (przykład) -->
<div id="newsletterModal" class="modal">
  <div class="modal-content">
    <span id="newsletterClose" class="close">&times;</span>
    <h2>Zapisz się do newslettera</h2>
    <p>Otrzymuj najnowsze oferty i promocje!</p>
    <input type="email" placeholder="Twój email">
    <button>Zapisz się</button>
  </div>
</div>

<script>
const BACKEND_URL = 'https://wayfly.onrender.com';

async function loadReviews() {
  const container = document.getElementById('reviewsList');
  container.innerText = 'Ładowanie opinii…';
  try {
    const res = await fetch(`${BACKEND_URL}/api/reviews`);
    if (!res.ok) throw new Error('Błąd pobierania');
    const reviews = await res.json();
    container.innerHTML = '';
    if (!reviews || reviews.length === 0) {
      container.innerText = 'Brak zatwierdzonych opinii.';
      return;
    }
    reviews.forEach(review => {
      const div = document.createElement('div');
      div.className = 'single-review';
      const ratingNumber = Number(review.rating) || 0;
      const stars = '★'.repeat(ratingNumber) + '☆'.repeat(5 - ratingNumber);
      div.innerHTML = `
        <h3>${escapeHtml(review.tripTo)}</h3>
        <p><strong>${escapeHtml(review.name || review.userEmail)}</strong></p>
        <p class="review-stars">${stars}</p>
        <p>${escapeHtml(review.comment)}</p>
      `;
      container.appendChild(div);
    });
  } catch (err) {
    console.error(err);
    container.innerText = 'Nie udało się załadować opinii.';
  }
}

function escapeHtml(str) {
  if (!str) return '';
  return String(str)
    .replace(/&/g, '&amp;')
    .replace(/"/g, '&quot;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;');
}

document.addEventListener('DOMContentLoaded', () => {
  loadReviews();

  const form = document.getElementById('reviewForm');

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      document.getElementById('thankYouMessage').innerText = '';

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const rating = parseInt(document.getElementById('rating').value);
      const tripTo = document.getElementById('tripTo').value.trim();
      const tripStart = document.getElementById('tripStart').value;
      const tripEnd = document.getElementById('tripEnd').value;
      const comment = document.getElementById('comment').value.trim();

      // Zgodna walidacja z backendem:
      if (!name || !email || !tripTo || !tripStart || !tripEnd || !comment || !rating || rating < 1 || rating > 5) {
        document.getElementById('thankYouMessage').innerText = 'Uzupełnij poprawnie wszystkie pola formularza.';
        return;
      }

      try {
        const res = await fetch(`${BACKEND_URL}/api/add-review`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, rating, tripTo, tripStart, tripEnd, comment })
        });

        const data = await res.json();

        if (res.ok && data.success) {
          document.getElementById('thankYouMessage').innerText =
            '✅ Dziękujemy za opinię! Po zatwierdzeniu pojawi się na stronie.';
          form.reset();
          loadReviews();
        } else {
          console.error('Server response error:', data);
          document.getElementById('thankYouMessage').innerText =
            '❌ Wystąpił błąd. Spróbuj ponownie później.';
        }
      } catch (err) {
        console.error('Fetch error:', err);
        document.getElementById('thankYouMessage').innerText =
          '❌ Wystąpił błąd. Spróbuj ponownie później.';
      }
    });
  }

  // --- Modale ---
  const contactBtn = document.getElementById('contactBtn');
  const contactModal = document.getElementById('contactModal');
  const contactClose = document.getElementById('contactClose');

  const newsletterModal = document.getElementById('newsletterModal');
  const newsletterClose = document.getElementById('newsletterClose');

  if (contactBtn && contactModal && contactClose) {
    contactBtn.addEventListener('click', (ev) => {
      ev.preventDefault();
      contactModal.style.display = 'flex';
    });
    contactClose.addEventListener('click', () => {
      contactModal.style.display = 'none';
    });
  }

  if (newsletterModal && newsletterClose) {
    setTimeout(() => {
      newsletterModal.style.display = 'flex';
      newsletterModal.setAttribute('aria-hidden', 'false');
    }, 2000);
    newsletterClose.addEventListener('click', () => {
      newsletterModal.style.display = 'none';
      newsletterModal.setAttribute('aria-hidden', 'true');
    });
  }

  // Zamknięcie klikając poza modal lub ESC
  window.addEventListener('click', (e) => {
    if (e.target === contactModal) contactModal.style.display = 'none';
    if (e.target === newsletterModal) newsletterModal.style.display = 'none';
  });

  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      if (contactModal) contactModal.style.display = 'none';
      if (newsletterModal) newsletterModal.style.display = 'none';
    }
  });

});
</script>

</body>
</html>































































































